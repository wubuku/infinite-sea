# README

æˆ‘ä»¬ä½¿ç”¨ dddappp è¿™ä¸ªä½ä»£ç å¹³å°æ¥å¼€å‘è¿™ä¸ªæ¸¸æˆã€‚è™½ç„¶ dddappp å¹¶ä¸æ˜¯ä¸“é—¨ä¸ºæ¸¸æˆå¼€å‘è®¾è®¡çš„ï¼Œä½†æ˜¯å®ƒå®Œå…¨å¯ä»¥ä½œä¸ºä¸€ä¸ªâ€œå…¨é“¾æ¸¸æˆå¼•æ“â€æ¥ä½¿ç”¨ã€‚

ä½¿ç”¨ dddappp å¼€å‘å…¨é“¾æ¸¸æˆä»¤äººéš¾ä»¥ç½®ä¿¡åœ°ç®€å•ã€‚

æˆ‘ä»¬åªè¦å…ˆåšå¥½éœ€æ±‚åˆ†æå’Œé¢†åŸŸå»ºæ¨¡ï¼Œç„¶åç¼–å†™ DDDML æ¨¡å‹æ–‡ä»¶ï¼Œå†è¿è¡Œ dddappp åˆ›å»ºå·¥å…·ï¼Œç”Ÿæˆå¤§éƒ¨åˆ†ä»£ç ï¼Œç„¶ååœ¨æŸäº›ç‰¹å®šåœ°æ–¹å¡«å……å°‘é‡çš„ä¸šåŠ¡é€»è¾‘çš„å®ç°ï¼Œå°±å¯ä»¥å®Œæˆä¸€ä¸ªå…¨é“¾æ¸¸æˆçš„å¼€å‘ã€‚

## éœ€æ±‚åˆ†æä¸é¢†åŸŸå»ºæ¨¡

### Items

### Skills

Itemï¼ˆç‰©å“ï¼‰æœ‰ä¸¤ç§â€œç”Ÿäº§/åˆ›é€ â€æ–¹å¼ï¼š

* Item Productionã€‚éœ€è¦â€œåŸææ–™â€ï¼Œç”Ÿäº§æ—¶éœ€è¦æ¶ˆè€—ä¸€å®šæ•°é‡çš„åŸææ–™ï¼ˆå…¶ä»– Itemsï¼Œæ¯”å¦‚ä»CottonSeeds->Cottonsï¼‰ã€‚
* Item Creationã€‚ä¸éœ€è¦åŸææ–™ã€‚

åŒä¸€ç§ä¸œè¥¿ï¼ˆItemï¼‰ï¼Œæ˜¯å¯èƒ½å¯ä»¥é€šè¿‡ä¸åŒçš„æŠ€èƒ½ï¼ˆSkillï¼‰è·å¾—çš„ã€‚æ¯”å¦‚ä½ å¯ä»¥é€šè¿‡ â€œFarmingâ€ æŠ€èƒ½ç§æ¤ã€æ”¶è·ä¸€ç§å†œäº§å“ï¼Œä¹Ÿå¯ä»¥â€œå·çªƒâ€æŠ€èƒ½è·å¾—å®ƒã€‚

Skillï¼ˆæŠ€èƒ½ï¼‰è¦ä¹ˆæ˜¯ç”Ÿäº§ï¼ˆProductionï¼‰å‹çš„æŠ€èƒ½ï¼Œè¦ä¹ˆæ˜¯åˆ›é€ ï¼ˆCreationï¼‰å‹çš„æŠ€èƒ½ï¼Œä¸ä¼šä¸¤è€…éƒ½æ˜¯ã€‚æ¯”å¦‚ï¼š

* Farmingï¼ˆå†œä¸šï¼‰æ˜¯ç”Ÿäº§å‹çš„æŠ€èƒ½ã€‚éœ€è¦æ¶ˆè€—â€œç§å­â€ï¼ˆåŸææ–™ itemsï¼‰ã€‚ç§å­å¯ä»¥ä»å¸‚åœºè´­ä¹°ã€å¯ä»¥â€œå·çªƒâ€ï¼ˆå·çªƒæ˜¯åˆ›é€ å‹çš„æŠ€èƒ½ï¼‰æˆ–è€…ä½¿ç”¨å…¶ä»–æŠ€èƒ½è·å¾—ã€‚
* Miningï¼ˆæŒ–çŸ¿ï¼‰å’Œ Woodcuttingï¼ˆä¼æœ¨ï¼‰æ˜¯åˆ›é€ å‹çš„æŠ€èƒ½ã€‚
  * æˆ‘ä»¬éœ€è¦ç»™ç©å®¶å¯¹è¿™äº›åˆ›é€ å‹æŠ€èƒ½çš„ä½¿ç”¨åšä¸€äº›é™åˆ¶ã€‚
  * ä¸¥æ ¼æ¥è¯´ï¼Œå®ƒä¸å¤ªåƒç”Ÿäº§å‹æŠ€èƒ½é‚£æ ·ï¼Œåè€…ä¸»è¦æ˜¯é€šè¿‡è®¾ç½®â€œç”Ÿäº§é…æ–¹â€æ‰€éœ€çš„ï¼ˆå¯èƒ½æ˜¯å¤šç§ï¼‰åŸææ–™ item å’Œæ•°é‡æ¥è¾¾åˆ°å¯¹æŠ€èƒ½çš„ä½¿ç”¨é™åˆ¶ã€‚
  * ä¸è¿‡ï¼Œä»ç„¶å¯ä»¥å°†â€œä¸€ç§åˆ›é€ å‹æŠ€èƒ½çš„ä½¿ç”¨é…é¢â€æŠ½è±¡ä¸ºä¸€ä¸ªç‰¹æ®Šçš„ Item(Id) å’Œ quantity çš„ pairã€‚

### Skill Processes

å®ä½“ Skill Processï¼ˆæŠ€èƒ½æµç¨‹ï¼‰è¡¨ç¤ºæ‰§è¡Œ Item Production æˆ– Item Creation çš„è¿‡ç¨‹ã€‚

#### Item Production çš„ Skill Process

æ‰§è¡Œ Skill Process ç”Ÿäº§ Itemï¼Œå¯¹äºå¤§å¤šæ•° Itemï¼Œç”Ÿäº§æˆæœåªéœ€è¦ä½¿ç”¨â€œItem ID å’Œæ•°é‡â€è¡¨ç¤ºå°±å¯ä»¥äº†ã€‚

ä½†æ˜¯ Skill Process è¿˜éœ€è¦æœ‰ä¸€äº›ç”¨æ¥åˆ¶é€ â€œItem çš„ç‹¬ç‰¹ä¸ªä½“â€çš„æ–¹æ³•ã€‚

* åœ¨ MVP ç‰ˆæœ¬ä¸­ï¼Œå…·æœ‰â€œç‹¬ç‰¹ä¸ªä½“â€çš„ Item ä¸»è¦æŒ‡çš„æ˜¯ Shipã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬ç»™ SkillProcess å®šä¹‰äº† StartShipProduction / CompleteShipProduction æ–¹æ³•ã€‚
* æ–¹æ³• StartShipProduction çš„å‚æ•°åˆ—è¡¨åº”è¯¥åŒ…å«è¡¨ç¤ºâ€œå®é™…æŠ•å…¥çš„ææ–™æ•°é‡â€çš„ä¿¡æ¯ï¼Œå› ä¸ºå®ƒä»¬å¯ä»¥å¤§äº Item Production ä¸­è§„å®šçš„ï¼ˆæœ€å°‘ï¼‰æ•°é‡ã€‚

[TBD]

### å‰åç«¯å¾…ç¡®è®¤é—®é¢˜

#### ä½ç½®åæ ‡çš„è¡¨ç¤ºé—®é¢˜

åç«¯å»ºè®®ï¼š

* åˆçº¦ï¼ˆåç«¯ï¼‰çš„åæ ‡å€¼ä»¥ u32ï¼ˆæ— ç¬¦å· 32 ä½æ•´æ•°ï¼Œå…¶æœ€å¤§å€¼ä¸º `4,294,967,295`ï¼‰è¡¨ç¤ºï¼Œå› ä¸ºä¸»æµçš„æ™ºèƒ½åˆçº¦è¯­è¨€ï¼ˆåŒ…æ‹¬ Moveï¼‰ä¸€èˆ¬éƒ½æ²¡æœ‰â€œæœ‰ç¬¦å·æ•´æ•°â€çš„ç±»å‹ã€‚
* å‰ç«¯å¦‚æœ‰å¿…è¦ï¼Œå¯ä»¥æ‰§è¡Œåæ ‡å˜æ¢ï¼Œå¯ä»¥å°†åˆçº¦ä¸­å­˜å‚¨çš„ u32 æ•´æ•°åæ ‡å€¼æ¢ç®—ä¸º i32 åæ ‡å€¼ï¼ˆæœ‰ç¬¦å· 32 ä½æ•´æ•°ï¼‰ã€‚
  å¯ä»¥è€ƒè™‘å°†åŸå§‹çš„ u32 åæ ‡å€¼å‡å» i32 ä½æ•´æ•°çš„æœ€å¤§å€¼ `2,147,483,647` ï¼Œ å¾—åˆ°è´Ÿæ•°æˆ–è€…æ­£æ•°è¡¨ç¤ºçš„åæ ‡å€¼ã€‚
  å³ä»¥ u32 åæ ‡å€¼è¡¨ç¤ºçš„åœ°å›¾çš„ä¸­å¿ƒç‚¹ä¸º `("2,147,483,647", "2,147,483,647")`ã€‚
* ä¸å»ºè®®åœ¨é“¾ä¸Šä»¥è¡¥ç çš„å½¢å¼åœ¨ u32 ç±»å‹çš„å­—æ®µä¸­å­˜å‚¨ï¼ˆæ­£ / è´Ÿï¼‰åæ ‡å€¼ï¼Œå› ä¸ºè¿™æ ·ä¼šæ˜æ˜¾å¢åŠ ä½ç½®è®¡ç®—é€»è¾‘çš„å¤æ‚åº¦ã€‚

#### é€Ÿåº¦çš„å•ä½è½¬æ¢é—®é¢˜

* éœ€è¦æ˜ç¡® Ship çš„ speed å€¼å’Œä»¥ `â€œåæ ‡å•ä½ / ç§’â€`çš„é€Ÿåº¦å€¼ä¹‹é—´çš„è½¬æ¢å…³ç³»ã€‚
  * æ¯”å¦‚ Ship çš„ speed å€¼æ˜¯ `1`ï¼Œé‚£ä¹ˆè¡¨ç¤ºå®ƒæ¯åˆ†é’Ÿï¼ˆ60 ç§’ï¼‰ç§»åŠ¨ 100 ä¸ªåæ ‡å•ä½ã€‚
* åç«¯åˆçº¦ä¸­ï¼Œæ—¶é—´ç‚¹æ˜¯ä»¥â€œç§’â€è®¡é‡çš„ Unix æ—¶é—´ã€‚å³ä» 1970 å¹´ 1 æœˆ 1 æ—¥ 0 æ—¶ 0 åˆ† 0 ç§’å¼€å§‹çš„ç§’æ•°ã€‚

#### èˆ¹é˜Ÿçš„å½“å‰ä½ç½®é—®é¢˜

* è¦æ›´æ–°â€œèˆ¹é˜Ÿâ€åœ¨é“¾ä¸Šçš„ä½ç½®çŠ¶æ€ï¼Œéœ€è¦å‘é€äº¤æ˜“ï¼ˆæ¶ˆè€— Gas / äº§ç”Ÿè´¹ç”¨ï¼‰ï¼Œæ‰€ä»¥èˆ¹é˜Ÿçš„é“¾ä¸ŠçŠ¶æ€å¯èƒ½ä¸é€‚å®œâ€œå®æ—¶â€æ›´æ–°ã€‚
  é‚£ä¹ˆï¼Œå¾ˆå¤šæ—¶å€™èˆ¹é˜Ÿçš„â€œå®æ—¶ä½ç½®â€å¯èƒ½éœ€è¦é“¾ä¸‹è®¡ç®—ã€‚è¿™é‡Œçš„é“¾ä¸‹åŒ…æ‹¬å‰ç«¯ï¼ˆæµè§ˆå™¨ï¼‰é“¾ä¸‹æœåŠ¡ï¼ˆindexerï¼‰ã€‚
* å½“èˆ¹é˜Ÿå¤„äºèˆªè¡ŒçŠ¶æ€ï¼Œé‚£ä¹ˆå¯èƒ½éœ€è¦æ ¹æ®è¿™äº›å±æ€§æ¥è®¡ç®—èˆ¹é˜Ÿçš„å½“å‰ä½ç½®ï¼š
  * æœ€åä¸€æ¬¡æ›´æ–°çš„åæ ‡ï¼›
  * èˆªè¡Œçš„ç›®æ ‡ä½ç½®åæ ‡ï¼›
  * èˆ¹é˜Ÿçš„ç§»åŠ¨é€Ÿåº¦ï¼›
  * æœ€åä¸€æ¬¡æ›´æ–°åæ ‡çš„æ—¶é—´ã€‚
* é“¾ä¸‹è®¡ç®—â€œå½“å‰ä½ç½®â€å¯èƒ½ä¼šå¾—å‡ºè¿™æ ·ä¸€ä¸ªç»“æœï¼šèˆ¹é˜Ÿå·²ç»åˆ°è¾¾ç›®çš„åœ°ï¼Œå®é™…ä¸Šå¤„äºâ€œåœæ³Šâ€çŠ¶æ€ã€‚
* å½“ç„¶ï¼Œé“¾ä¸ŠçŠ¶æ€ä¹Ÿä¸èƒ½æ€»æ˜¯ä¸æ›´æ–°ï¼Œåœ¨æœ‰æœºä¼šå‘é€â€œäº¤æ˜“â€ä¸Šé“¾çš„æ—¶å€™ï¼Œè§¦å‘åˆçº¦çš„â€œèˆ¹é˜ŸçŠ¶æ€æ›´æ–°é€»è¾‘â€å³å¯ã€‚
* èˆ¹é˜Ÿä½ç½®çš„é“¾ä¸‹è®¡ç®—é€»è¾‘éœ€è¦å’Œé“¾ä¸Šï¼ˆåˆçº¦ï¼‰çš„è®¡ç®—é€»è¾‘ä¿æŒä¸€è‡´ã€‚
  * è™½ç„¶æœ€ç»ˆçŠ¶æ€æ˜¯ä»¥â€œé“¾ä¸ŠçŠ¶æ€â€ä¸ºå‡†ï¼Œä½†æ˜¯é“¾ä¸‹çš„è®¡ç®—é€»è¾‘å¦‚æœå‡ºé”™å¯èƒ½ä¼šå¯¼è‡´ä¸å¥½çš„ç”¨æˆ·ä½“éªŒã€‚ï¼ˆå³ï¼šæŒ‰ç…§é“¾ä¸‹è®¡ç®—ç»“æœï¼Œä¸€ç¬”äº¤æ˜“æ‰€éœ€è¦çš„å‰ç½®æ¡ä»¶å·²ç»æ»¡è¶³ï¼Œä½†æ˜¯åœ¨æäº¤åˆ°é“¾ä¸Šæ‰§è¡Œçš„æ—¶å€™å‘ç”Ÿå¤±è´¥ã€‚ï¼‰
  * é“¾ä¸Šåˆçº¦çš„â€œå½“å‰ä½ç½®â€çš„è®¡ç®—é€»è¾‘è§ [direct_route_util.move](./sui-contracts/infinite-sea-common/sources/utils/direct_route_util.move)ã€‚
  * é“¾ä¸Šåˆçº¦çš„èˆ¹é˜Ÿä½ç½®çŠ¶æ€çš„æ›´æ–°é€»è¾‘è§ [roster_update_location_logic.move](./sui-contracts/infinite-sea/sources/roster_update_location_logic.move)ã€‚

#### äº‹ä»¶è®¢é˜…æœºåˆ¶çš„æµ‹è¯•

åœ¨ Ship Battle å‘ç”Ÿæ—¶ï¼Œå‰ç«¯äº¤äº’å¯¹äºå®æ—¶æ€§çš„è¦æ±‚å¯èƒ½æ¯”è¾ƒé«˜ã€‚ï¼ˆä¸çŸ¥æ¯è½® 10 ç§’çš„å‡ºæ‹›æ—¶é—´æ˜¯å¦è¶³å¤Ÿï¼Ÿï¼‰

* é“¾çš„çŠ¶æ€è¾¾åˆ°ç»ˆç»“æ€§æ˜¯éœ€è¦ä¸€ç‚¹æ—¶é—´çš„ï¼›ç‰¹åˆ«æ˜¯èŠ‚ç‚¹çš„éƒ¨åˆ†æŸ¥è¯¢æ¥å£ï¼Œæ˜¯ä¾èµ–ï¼ˆå®ƒå†…éƒ¨çš„ï¼‰â€œç´¢å¼•æœåŠ¡â€å®ç°çš„ï¼Œè¿™äº›æ¥å£å¯èƒ½å¤šå°‘ä¼šæœ‰æ‰€å»¶è¿Ÿã€‚
* å‰ç«¯æœ€å¥½å…ˆåšä¸€äº›æµ‹è¯•ï¼Œé€šè¿‡è®¢é˜…é“¾ä¸Šäº‹ä»¶çš„æ–¹å¼ï¼Œçœ‹çœ‹æ˜¯ä¸æ˜¯å¯ä»¥è·å¾—è¶³å¤Ÿå¿«çš„å®æ—¶æ€§ï¼ˆä¸çŸ¥ Sui TS SDK æ˜¯å¦å°è£…äº†è®¢é˜…äº‹ä»¶çš„æ–¹æ³•ï¼‰ã€‚

## ç¼–ç 

### ç¼–å†™ DDDML æ¨¡å‹æ–‡ä»¶

æ¨¡å‹æ–‡ä»¶ä½äºç›®å½• `./dddml` ä¸‹ã€‚

> **Tip**
>
> About DDDML, here is an introductory article: ["Introducing DDDML: The Key to Low-Code Development for Decentralized Applications"](https://github.com/wubuku/Dapp-LCDP-Demo/blob/main/IntroducingDDDML.md).

### ç”Ÿæˆä»£ç 

```shell
docker run \
-v .:/myapp \
wubuku/dddappp:0.0.1 \
--dddmlDirectoryPath /myapp/dddml \
--boundedContextName Dddml.SuiInfiniteSea \
--suiMoveProjectDirectoryPath /myapp/sui-contracts \
--boundedContextSuiPackageName infinite_sea \
--boundedContextJavaPackageName org.dddml.suiinfinitesea \
--javaProjectsDirectoryPath /myapp/sui-java-service \
--javaProjectNamePrefix suiinfinitesea \
--pomGroupId dddml.suiinfinitesea \
--enableMultipleMoveProjects
```

### å®ç°ä¸šåŠ¡é€»è¾‘

åœ¨ç”Ÿæˆä»£ç åï¼Œæˆ‘ä»¬éœ€è¦å¡«å……ä¸€äº›ä¸šåŠ¡é€»è¾‘çš„å®ç°ã€‚

ä½ å¯ä»¥çœ‹åˆ°ï¼Œåœ¨æˆ‘ä»¬è¿™ä¸ªä»£ç åº“çš„æºä»£ç ä¸­ï¼Œæ‰€æœ‰ä»¥ `// <autogenerated>` å¼€å¤´çš„æ–‡ä»¶ï¼Œéƒ½æ˜¯ç”± dddappp å·¥å…·ç”Ÿæˆçš„ï¼Œæˆ‘ä»¬ä¸åº”è¯¥ä¿®æ”¹å®ƒä»¬ã€‚è¿™äº›ä»£ç å äº†æ•´ä¸ªä»£ç åº“çš„ç»å¤§éƒ¨åˆ†ã€‚

å…¶ä»–éœ€è¦æˆ‘ä»¬å¡«å……ä¸šåŠ¡é€»è¾‘çš„æ–‡ä»¶ï¼Œdddappp å·¥å…·ä¹Ÿå¸®æˆ‘ä»¬ç”Ÿæˆäº†è„šæ‰‹æ¶ä»£ç ï¼Œä¹Ÿå°±æ˜¯å‡½æ•°çš„ç­¾åéƒ¨åˆ†ï¼Œæˆ‘ä»¬åªéœ€è¦å¡«å……å…¶ä¸­çš„â€œå‡½æ•°ä½“â€ï¼ˆbodyï¼‰éƒ¨åˆ†ã€‚

å…·ä½“æ¥è¯´ï¼Œæˆ‘ä»¬ä¸»è¦æ˜¯åœ¨ä»¥ `_logic.move` ç»“å°¾çš„æ–‡ä»¶ä¸­å¡«å……æ¨¡å‹ä¸­å®šä¹‰çš„â€œå®ä½“çš„æ–¹æ³•â€çš„å®ç°ã€‚

å¦‚æœä½ åœ¨é¢†åŸŸæ¨¡å‹ä¸­å®šä¹‰äº†â€œé¢†åŸŸæœåŠ¡â€ï¼Œé‚£ä¹ˆï¼Œè¿˜éœ€è¦åœ¨ä»¥ `_service.move` ç»“å°¾çš„æ–‡ä»¶ä¸­å¡«å……â€œé¢†åŸŸæœåŠ¡â€çš„å®ç°ã€‚
ä¸€èˆ¬æ¥è¯´ï¼Œå®ƒä»¬åº”è¯¥æ˜¯å¾ˆè–„çš„ä¸€å±‚â€œåŒ…è£…â€ä»£ç ï¼Œåªæ˜¯å¯¹é¢†åŸŸæ¨¡å‹ä¸­çš„å®ä½“çš„æ–¹æ³•çš„ç»„åˆè°ƒç”¨ï¼Œä¸ä¼šåŒ…å«å¤æ‚çš„ä¸šåŠ¡é€»è¾‘ã€‚

å€¼å¾—ä¸€æçš„æ˜¯ï¼Œé“¾ä¸‹æœåŠ¡ï¼ˆoff-chain serviceï¼Œæœ‰æ—¶å€™ä¼šè¢«ç§°ä¸º indexerï¼‰æ˜¯ 100% è‡ªåŠ¨ç”Ÿæˆçš„ã€‚
ä½ ç”šè‡³ä¸€è¡Œä»£ç éƒ½ä¸éœ€è¦å†™ï¼Œåªéœ€è¦é…ç½®ä¸€ä¸‹å‘å¸ƒåˆçº¦çš„äº¤æ˜“æ‘˜è¦ï¼Œå°±å¯ä»¥ç›´æ¥ä½¿ç”¨äº†ã€‚

#### Move ä»£ç ä¸­çš„å®šä¹‰çš„å¸¸é‡

æˆ‘ä»¬åœ¨ Move ä»£ç ä¸­å®šä¹‰äº†ä¸€äº›å¸¸é‡ã€‚åœ¨ä¸‹é¢çš„ä»£ç ç‰‡æ®µä¸­ï¼Œéƒ¨åˆ†å¸¸é‡å®šä¹‰æ‰€åœ¨çš„æ¨¡å—ä»¥åŠç”¨äºè·å–å¸¸é‡çš„å€¼çš„å‡½æ•°åï¼š

```move
//
        // å¯ä»¥ç¼–å†™è„šæœ¬æ¥æ·»åŠ å²›å±¿ï¼Œä»¥åŠä¸ºå²›å±¿éšæœºåœ°ç”Ÿæˆèµ„æºã€‚
        //
        // æ·»åŠ å²›å±¿æ—¶ï¼Œåº”è¯¥åˆå§‹åŒ–ä»¥ä¸‹èµ„æºï¼ˆåœ¨ item_id æ¨¡å—ä¸­å®šä¹‰äº†è¿”å› Item ID å¸¸é‡çš„å‡½æ•°ï¼‰ï¼š
        item_id::resource_type_mining(); // Item Creation éœ€è¦çš„â€œèµ„æºâ€ä¹ŸæŠ½è±¡ä¸º Itemï¼Œè¿™æ˜¯æ‰§è¡ŒæŒ–çŸ¿æ“ä½œæ‰€éœ€çš„èµ„æºã€‚
        item_id::resource_type_woodcutting(); // è¿™æ˜¯æ‰§è¡Œä¼æœ¨æ“ä½œæ‰€éœ€çš„èµ„æºã€‚
        item_id::cotton_seeds(); // è¿™æ˜¯ç§æ¤æ£‰èŠ±æ‰€éœ€çš„â€œåŸææ–™â€

        //ä»¥ä¾¿ç”¨æˆ·å¯ä»¥é€šè¿‡è¿™äº›æŠ€èƒ½ï¼š
        skill_type::mining(); // è¿™æ˜¯ä¸€ä¸ª Item Creation ç±»å‹çš„æŠ€èƒ½
        skill_type::woodcutting(); // Item Creation Skill
        skill_type::farming(); // è¿™æ˜¯ä¸€ä¸ª Item Production ç±»å‹çš„æŠ€èƒ½

        //äº§å‡ºé€ èˆ¹éœ€è¦çš„ Itemsï¼š
        item_id::copper_ore(); // é“œçŸ¿
        item_id::normal_logs(); // æ™®é€šåŸæœ¨
        item_id::cottons(); // æ£‰èŠ±
```

### èµ„æº(Item)å¸¸é‡

| Item Id    | Name                    | è¯´æ˜                                    |
| ---------- | ----------------------- | --------------------------------------- |
| 0          | UNUSED_ITEM             | æœªä½¿ç”¨                                  |
| 2          | CottonSeeds             | æ£‰èŠ±ç§å­                                |
| 102        | Cotton                  | æ£‰èŠ±ï¼ˆç”±æ£‰èŠ±ç§å­ç§æ¤å¾—åˆ°ï¼‰              |
| 200        | Normal Log              | æœ¨å¤´ï¼ˆç ä¼ä¹‹åæˆå“)                     |
| 301        | CopperOre               | é“œï¼ˆæŒ–çŸ¿ä¹‹åæˆå“ï¼‰                      |
| 1000000001 | Ship                    | èˆ¹ï¼ˆå»ºé€ å¾—åˆ°ï¼‰                          |
| 2000000001 | ResourceTypeWoodcutting | ä¼æœ¨èµ„æº(ä¼æœ¨Woodingä¹‹åå¾—åˆ° Normal Log |
| 2000000003 | ResourceTypeMining      | æŒ–çŸ¿èµ„æº(æŒ–çŸ¿Miningä¹‹åå¾—åˆ° CooperOre   |

### æŠ€èƒ½å¸¸é‡

| æŠ€èƒ½        | å¸¸é‡ | è¯´æ˜ |
| ----------- | ---- | ---- |
| farming     | 0    | ç§æ¤ |
| woodcutting | 1    | ä¼æœ¨ |
| mining      | 3    | æŒ–çŸ¿ |
| crafing     | 6    | é€ èˆ¹ |

## æµ‹è¯•åº”ç”¨

### å‘å¸ƒåˆçº¦

1. Coinåˆçº¦
2. Commonåˆçº¦
3. mainåˆçº¦

ä¾æ¬¡å‘å¸ƒä»¥ä¸Š3ä¸ªåˆçº¦ä¼šå¾—åˆ°ä»¥ä¸‹ä¸»è¦ä¿¡æ¯ï¼š

```JSON{
"coin": {
    "TreasuryCap": "0x45bef3a9403c1af45551f958022a23c52399a8f9cdd95694097c26966ff2c50b",
    "PackageId": "0xc88d834617796a46ad9076bb7c7929f20e2e4395441d6529b995ee4c6d91e1ab",
    "Digest": "DUzQinWD7TyYK3yVb5AvWeVspKk1m75vyAv9t1huCbtX",
    "EnergyId": "0xcc301d760ca2af0f383cb3cb730337a88c9f86cae47d6700d90ffab4a611e9d7"
  },
  "common": {
    "Digest": "8WUmx5GSp3VLfZG4Ezockmgifkne47Gowxhj3pJ9ztrb",
    "Publisher": "0x53001da8168d99f8733bfa1e88e5367fbddef584d4fbccb823d03c733eb8f183",
    "PackageId": "0x60199eae5d0ae8e867fc64548eb7d01ff08b741d265adacb3f40cda17ec80aec",
    "ExperienceTable": "0x6416b22fc0416eae49b3d6230ec817aec5ff3dcd760f781690e12f4e25fd10d2",
    "ItemCreationTable": "0x837a5d2cb879c8831b9858db20bef8a1bb6cb0112916b2a177331d718907f41e",
    "ItemTable": "0xabcdbb6ad9da21070c50cbd06eba4357d5cd29193a172dd218f5455a9bbbf367",
    "ItemProductionTable": "0xc382590b7e266071fb67337086b9fb9fbb3468397def139172f7b665b8c1c2ff",
    "ItemCreationMining": "0xad1a2084441878b0a77bdaaf451ca41424705d19c25b8bd589e30a3459fea4bb",
    "ItemProductionFarming": "0xfbd287a0196e9a3d5abc975c4c98394aa76c474e448dfd5c7be1e10c10874045",
    "ItemCreationWooding": "0x235588535c23089895f7e023546a55b19f5fce90726eb54b37d44dc352a8f90b",
    "ItemProducitonCrafting": "0xb7f5dc6e57ae0da9b98686f5f27bc18f12d53f74edda3b21e8adefb56997d0ef"
  },
  "main": {
    "Digest": "8jcbCg8pwLC8xq3iBLhRgChu4n12BTpxnHmqgkB6cvqn",
    "UpgradeCap": "0x126788288df9186075311e787a461a40fd3a21760ef664cc65f4ec275e13293c",
    "Publisher": "0x261ddc1e04be8731547d5ec6574c5573677ded3ab3ffba861c0857fa2ea04357",
    "PackageId": "0x336766298e8dee8b9bfa29622adbd07028e121cf04f353a286f111ea412aea2e",
    "RosterTable": "0x60762e7810db62b88ab6332bd4ed38989fea82fa04f479e863907d0cb599822f",
    "SkillProcessTable": "0x672a2e59388b87663762a03372553b6942bc6dcea4cd2ca5a3c752e32207ea97",
    "AdminCap": "0x9bc77a40625e2d53508637325859bdd37304874d5a29d27d079869321250c464",
    "Map": "0xc9bcf6235d0e24a1fbeaa565c0830d203f66122a86acf653ee96c5e8254c22ac",
    "Player": "0x56a4639600c0698a5816da1f60446db563cec76c2a8138f4f696278d5f713bf6",
    "SkillProcessMining": "0x06938825b815245399927b7b9ef0218fc0698639eb5082db101608dfc057a0ee",
    "SkillProcessWooding": "0x12da910316deab3883a19d6de2a316e5557dd7614b7f04c09351f4a9bfa6e4bd",
    "SkillProcessCrafting": "0x520599603c598d94620fb34d0546e68228e3a206a8fe9e2768f99a31aa74f1c6",
    "SkillProcessFarming2": "0xa19ae193efbd03bdc3c9cdb00e5eff06d7f901f14884d6ca0e654edca75b7cb0",
    "SkillProcessFarming1": "0xb54b805d077a7df5ed189a8a9573a3ddffa75db67c119048e6759b07cc996a8b"
  }
}
```

ä¸¾ä¾‹è¯´æ˜ï¼š

`coin.packageid` è¡¨ç¤º coin åˆçº¦åŒ…çš„ Idã€‚

`common.PackageId` è¡¨ç¤º common åˆçº¦åŒ…çš„ Idã€‚

`main.Digest` è¡¨ç¤ºå‘å¸ƒ mainåˆçº¦æ—¶å¾—åˆ°çš„æ‘˜è¦ä¿¡æ¯ã€‚

`coin.EnergyId` è¡¨ç¤º mint è·å¾—çš„èƒ½é‡ `ENERGY` å¸çš„ Object IDã€‚

`main.Map` çš„å€¼ä¸ºåœ°å›¾(map)çš„Idã€‚

### <a id="map"></a>åœ°å›¾

ä½¿ç”¨ä»¥ä¸‹ CLI å‘½ä»¤å¯ä»¥å¾—åˆ°åœ°å›¾çš„ç›¸å…³ä¿¡æ¯ï¼š
[](https://)

```shell
sui client object {main.map} --json
```

å¯ä»¥å¾—åˆ°ä»¥ä¸‹ä¿¡æ¯ï¼š

```JSON
{
  "objectId": "0xf36cfa34890b5f6845f538bdcb678e3822443c9b1f4f700db2a66a127d6d7162",
  "version": "37717652",
  "digest": "DwGg5Go9pTqb5fZXkmGzHKfUgDoTGDHZY8jYFRaGBQDW",
  "type": "0x1f1267f7197c3f118b5d1f147a9ceb9296318f786842ab743715f0645fda30dc::map::Map",
  "owner": {
    "Shared": {
      "initial_shared_version": 37712887
    }
  },
  "previousTransaction": "ErangDWTR3PgbEWDj8b7sy8Guao3No7c3ZFzt3zdioTM",
  "storageRebate": "1907600",
  "content": {
    "dataType": "moveObject",
    "type": "0x1f1267f7197c3f118b5d1f147a9ceb9296318f786842ab743715f0645fda30dc::map::Map",
    "hasPublicTransfer": false,
    "fields": {
      "admin_cap": "0xcc29ec9bf6e72e413f6f699a765f62c84ab028716fb4a2f1333bddb3d26c6cf1",
      "id": {
        "id": "0xf36cfa34890b5f6845f538bdcb678e3822443c9b1f4f700db2a66a127d6d7162"
      },
      "locations": {
        "type": "0x2::table::Table<0x2b853e8306950ffdabe20df1ae5703c27dfb909d53099558113251f8a0d0a596::coordinates::Coordinates, 0x1f1267f7197c3f118b5d1f147a9ceb9296318f786842ab743715f0645fda30dc::map_location::MapLocation>",
        "fields": {
          "id": {
            "id": "0xc64d10079ffcb61c167ad8793a585092939df129f7a284ee5fefebc57fc98dfe"
          },
          "size": "2"
        }
      },
      "schema_version": "0",
      "version": "3"
    }
  }
}
```

æˆ‘ä»¬ä¸»è¦å…³æ³¨å…¶ä¸­çš„ `content.locations`å±æ€§éƒ¨åˆ†ï¼Œè¯¥éƒ¨åˆ†è¡¨ç¤ºåœ°å›¾ä¸Šç›®å‰å·²ç»æ·»åŠ çš„å²›å±¿ã€‚

ä½¿ç”¨curlæ‰§è¡Œä»¥ä¸‹è¯·æ±‚ï¼š

```
curl -X POST -H "Content-Type: application/json" -d '{"jsonrpc":"2.0","id":1,"method":"suix_getDynamicFields","params":[$content.locaions.fields.id.id]}' https://fullnode.testnet.sui.io/
```

å¯ä»¥è·å¾—ä»¥ä¸‹ç±»ä¼¼ä¿¡æ¯ï¼š

```JSON
{
	"jsonrpc": "2.0",
	"result": {
		"data": [{
			"name": {
				"type": "0x2b853e8306950ffdabe20df1ae5703c27dfb909d53099558113251f8a0d0a596::coordinates::Coordinates",
				"value": {
					"x": 51,
					"y": 51
				}
			},
			"bcsName": "9XmJiC4mP1y",
			"type": "DynamicField",
			"objectType": "0x1f1267f7197c3f118b5d1f147a9ceb9296318f786842ab743715f0645fda30dc::map_location::MapLocation",
			"objectId": "0x5dfb8153dfd0aeea1e1558e0b3f991cac1d8ab5e797627ad4445ce4ce099a692",
			"version": 37717652,
			"digest": "9H5nvaRUXbyULStSPsjUdDn7DXQS1nNFmVqKmRVyoMPn"
		}, {
			"name": {
				"type": "0x2b853e8306950ffdabe20df1ae5703c27dfb909d53099558113251f8a0d0a596::coordinates::Coordinates",
				"value": {
					"x": 50,
					"y": 50
				}
			},
			"bcsName": "9N4dhPDnnU7",
			"type": "DynamicField",
			"objectType": "0x1f1267f7197c3f118b5d1f147a9ceb9296318f786842ab743715f0645fda30dc::map_location::MapLocation",
			"objectId": "0x78573cac493248eaea380c6658b839ad44c7a4e0bd0728d91b51a878edd3b16b",
			"version": 37716508,
			"digest": "BCn7aPsiJ2m935TZKXSbwozAt9U2MBzCrVtw1TVGbmJG"
		}],
		"nextCursor": "0x78573cac493248eaea380c6658b839ad44c7a4e0bd0728d91b51a878edd3b16b",
		"hasNextPage": false
	},
	"id": 1
}
```

è¡¨æ˜åœ¨åœ°å›¾ä¸Šä¸­å­˜åœ¨ä¸¤ä¸ªå²›å±¿ï¼Œå®ƒä»¬çš„åæ ‡åˆ†åˆ«æ˜¯ï¼ˆ51,51ï¼‰å’Œ(50,50)ã€‚å¯¹è±¡ç±»å‹ä¸ºï¼š{main.packageId}::map_location::MapLocationï¼Œå¯¹è±¡æ ‡è¯†(id)åˆ†åˆ«ä¸ºï¼š0x5dfb8153dfd0aeea1e1558e0b3f991cac1d8ab5e797627ad4445ce4ce099a692 å’Œ 0x78573cac493248eaea380c6658b839ad44c7a4e0bd0728d91b51a878edd3b16bã€‚

è¿›ä¸€æ­¥åœ¨æ§åˆ¶å°æ‰§è¡Œå‘½ä»¤å¦‚ä¸‹ï¼š

```
sui client object {mapLocationId} --json
```

å¯ä»¥å¾—åˆ°ä»¥ä¸‹æ ¼å¼è¿”å›ä¿¡æ¯ï¼š

```json
{
  "objectId": "0x5dfb8153dfd0aeea1e1558e0b3f991cac1d8ab5e797627ad4445ce4ce099a692",
  "version": "37717652",
  "digest": "9H5nvaRUXbyULStSPsjUdDn7DXQS1nNFmVqKmRVyoMPn",
  "type": "0x2::dynamic_field::Field<0x2b853e8306950ffdabe20df1ae5703c27dfb909d53099558113251f8a0d0a596::coordinates::Coordinates, 0x1f1267f7197c3f118b5d1f147a9ceb9296318f786842ab743715f0645fda30dc::map_location::MapLocation>",
  "owner": {
    "ObjectOwner": "0xc64d10079ffcb61c167ad8793a585092939df129f7a284ee5fefebc57fc98dfe"
  },
  "previousTransaction": "ErangDWTR3PgbEWDj8b7sy8Guao3No7c3ZFzt3zdioTM",
  "storageRebate": "2812000",
  "content": {
    "dataType": "moveObject",
    "type": "0x2::dynamic_field::Field<0x2b853e8306950ffdabe20df1ae5703c27dfb909d53099558113251f8a0d0a596::coordinates::Coordinates, 0x1f1267f7197c3f118b5d1f147a9ceb9296318f786842ab743715f0645fda30dc::map_location::MapLocation>",
    "hasPublicTransfer": false,
    "fields": {
      "id": {
        "id": "0x5dfb8153dfd0aeea1e1558e0b3f991cac1d8ab5e797627ad4445ce4ce099a692"
      },
      "name": {
        "type": "0x2b853e8306950ffdabe20df1ae5703c27dfb909d53099558113251f8a0d0a596::coordinates::Coordinates",
        "fields": {
          "x": 51,
          "y": 51
        }
      },
      "value": {
        "type": "0x1f1267f7197c3f118b5d1f147a9ceb9296318f786842ab743715f0645fda30dc::map_location::MapLocation",
        "fields": {
          "coordinates": {
            "type": "0x2b853e8306950ffdabe20df1ae5703c27dfb909d53099558113251f8a0d0a596::coordinates::Coordinates",
            "fields": {
              "x": 51,
              "y": 51
            }
          },
          "gathered_at": "0",
          "occupied_by": null,
          "resources": [
            {
              "type": "0x2b853e8306950ffdabe20df1ae5703c27dfb909d53099558113251f8a0d0a596::item_id_quantity_pair::ItemIdQuantityPair",
              "fields": {
                "item_id": 2,
                "quantity": 200
              }
            },
            {
              "type": "0x2b853e8306950ffdabe20df1ae5703c27dfb909d53099558113251f8a0d0a596::item_id_quantity_pair::ItemIdQuantityPair",
              "fields": {
                "item_id": 102,
                "quantity": 100
              }
            },
            {
              "type": "0x2b853e8306950ffdabe20df1ae5703c27dfb909d53099558113251f8a0d0a596::item_id_quantity_pair::ItemIdQuantityPair",
              "fields": {
                "item_id": 200,
                "quantity": 100
              }
            },
            {
              "type": "0x2b853e8306950ffdabe20df1ae5703c27dfb909d53099558113251f8a0d0a596::item_id_quantity_pair::ItemIdQuantityPair",
              "fields": {
                "item_id": 301,
                "quantity": 100
              }
            },
            {
              "type": "0x2b853e8306950ffdabe20df1ae5703c27dfb909d53099558113251f8a0d0a596::item_id_quantity_pair::ItemIdQuantityPair",
              "fields": {
                "item_id": 2000000001,
                "quantity": 200
              }
            },
            {
              "type": "0x2b853e8306950ffdabe20df1ae5703c27dfb909d53099558113251f8a0d0a596::item_id_quantity_pair::ItemIdQuantityPair",
              "fields": {
                "item_id": 2000000003,
                "quantity": 200
              }
            }
          ],
          "type": 0
        }
      }
    }
  }
}
```

æˆ‘ä»¬æŠŠé‡ç‚¹æ”¾åœ¨ `content.value.fields`å±æ€§ã€‚

å…¶ä¸­ä¹‹ `fileds`è¡¨ç¤ºå…¶åæ ‡ä½ç½®ï¼Œ`gathered_at`è¡¨ç¤ºä¸Šä¸€æ¬¡æ”¶é›†èµ„æºçš„æ—¶é—´ï¼Œ`occupied_by`è¡¨ç¤ºæ­¤å²›å±¿ç›®å‰è¢«è°å é¢†ï¼Œå¦‚æœæ²¡æœ‰å‘—å é¢†åˆ™ä¸º `null`ï¼Œå¦åˆ™ä¸ºç©å®¶(Player)ä¹‹Idï¼Œ`resouces`ä¸ºè¯¥å²›å±¿ç›®å‰æ‰€æ‹¥æœ‰çš„èµ„æºåˆ—è¡¨ã€‚

`resources`ä¸­åˆåŒ…å« `fields`å±æ€§ï¼Œå…¶ä¸­ `item_id`ä¸ºèµ„æºIdï¼Œ`item_id:2`è¡¨ç¤ºâ€œæ£‰èŠ±ç§å­â€,`quantity`ä¸ºè¯¥èµ„æºçš„æ•°é‡ã€‚


### ä»¥ä¸‹å…ˆå¿½ç•¥-----------------------------------

### åˆ›å»º Item ç”Ÿäº§é…æ–¹

è¯¥å‡½æ•°çš„å‚æ•°ï¼š

* item_production_id_skill_type: u8,
* item_production_id_item_id: u32,
* publisher: &sui:ğŸ“¦:Publisher,
* production_materials_item_id_list: vector<u32>,
* production_materials_item_quantity_list: vector<u32>,
* requirements_level: u16,
* base_quantity: u32,
* base_experience: u32,
* base_creation_time: u64,
* energy_cost: u64,
* success_rate: u16,
* item_production_table: &mut item_production::ItemProductionTable,

æˆ‘ä»¬å‡è®¾è¦åˆ›å»ºä¸€ä¸ªâ€œå†œä¸šâ€ç”Ÿäº§é…æ–¹ï¼šç§æ¤ä¸€ä»½åœŸè±†éœ€è¦ 3 ä¸ªâ€œåœŸè±†ç§å­â€ï¼Œç­‰çº§ 1 å°±å¯ä»¥ç§æ¤ï¼Œäº§å‡ºæ•°é‡ä¸º 10ï¼Œå¢åŠ ç»éªŒå€¼ä¸º 85ï¼Œéœ€è¦ 5 ç§’é’Ÿï¼Œæ¶ˆè€— 100 ä¸ªå•ä½çš„èƒ½é‡å¸ï¼ŒæˆåŠŸç‡ 100%ã€‚

æ‰§è¡Œå‘½ä»¤ï¼š

```shell
sui client call --package {COMMON_PACKAGE_ID} --module item_production_aggregate --function create \
--args '0' '2' {COMMON_PACKAGE_PUBLISHER_ID} \
'[1]' '[3]' \
'1' '10' '85' '5' '5' '100' \
{ITEM_PRODUCTION_TABLE_OBJECT_ID} \
--gas-budget 11000000
```

è®°å½•ä¸‹åˆ›å»ºå¥½çš„ç”Ÿäº§é…æ–¹ Object IDï¼Œä¸‹é¢æˆ‘ä»¬ä»¥å ä½ç¬¦ `{ITEM_PRODUCTION_OBJECT_ID_1}` æ¥è¡¨ç¤ºå®ƒã€‚

```text
â”‚  â”‚ ObjectID: {ITEM_PRODUCTION_OBJECT_ID_1}                                                                                              â”‚
â”‚  â”‚ ObjectType: 0x...::item_production::ItemProduction                                                            â”‚
```

### åˆ›å»ºç©å®¶

```shell
sui client call --package {DEFAULT_PACKAGE_ID} --module player_aggregate --function create \
--gas-budget 11000000
```

è®°å½•åˆ›å»ºçš„ç©å®¶å¯¹è±¡çš„ IDï¼Œä¸‹é¢æˆ‘ä»¬ä»¥å ä½ç¬¦ `{PLAYER_ID}` æ¥è¡¨ç¤ºå®ƒï¼š

```text
â”‚  â”‚ ObjectID: {PLAYER_ID}
â”‚  â”‚ ObjectType: 0x...::player::Player
```

### ç»™ç©å®¶ç©ºæŠ•ä¸€äº›èµ„æºï¼ˆItemsï¼‰

è¿™ä¸ªæ–¹æ³•åªæœ‰ç®¡ç†å‘˜å¯ä»¥ä½¿ç”¨ã€‚å‚æ•°ï¼š

* player: &mut player::Player,
* publisher: &sui:ğŸ“¦:Publisher,
* item_id: u32,
* quantity: u32,

è¿™é‡Œæˆ‘ä»¬å‡è®¾ç»™ç©å®¶ç©ºæŠ• 100 ä¸ªåœŸè±†ç§å­ï¼š

```shell
sui client call --package {DEFAULT_PACKAGE_ID} --module player_aggregate --function airdrop \
--args {PLAYER_ID} \
{DEFAULT_PACKAGE_PUBLISHER_ID} \
'1' '100' \
--gas-budget 11000000
```

### åˆ›å»ºä¸€ä¸ªç”Ÿäº§æµç¨‹

å‚æ•°ï¼š

* skill_process_id_skill_type: u8,
* skill_process_id_player_id: ID,
* player: &Player,
* skill_process_table: &mut skill_process::SkillProcessTable,

æ‰§è¡Œå‘½ä»¤ï¼š

```shell
sui client call --package "{DEFAULT_PACKAGE_ID}" --module skill_process_aggregate --function create \
--args '0' {PLAYER_ID} \
{PLAYER_ID} \
"{SKILL_PROCESS_TABLE_OBJECT_ID}" \
--gas-budget 11000000
```

ä¸€ä¸ªç¤ºä¾‹å‘½ä»¤ï¼š

```shell
sui client call --package 0x14ba8a9763d9883be8dcedce946efc25e5cbc80c4b8f09d1dbc89731fa517fb8 --module skill_process_aggregate --function create \
--args '0' 0x59e7a3b2d246f7c6852c2f8e953871668db8da387aa551116d1295d223335448 \
0x59e7a3b2d246f7c6852c2f8e953871668db8da387aa551116d1295d223335448 \
0x5689f9e28f3bf359604de4eb85a1c7a55520bd4097b54b42e1acb23c1fc44279 \
--gas-budget 11000000
```

è®°å½•ä¸‹åˆ›å»ºå¥½çš„ç”Ÿäº§æµç¨‹çš„å¯¹è±¡ IDï¼Œä¸‹é¢æˆ‘ä»¬ä»¥å ä½ç¬¦ `{SKILL_PROCESS_OBJECT_ID_1}` æ¥è¡¨ç¤ºå®ƒï¼š

```text
â”‚  â”‚ ObjectID: {SKILL_PROCESS_OBJECT_ID_1}
â”‚  â”‚ ObjectType: 0x::skill_process::SkillProcess
```

### å¼€å§‹ç”Ÿäº§æµç¨‹

å‚æ•°ï¼š

* skill_process: &mut SkillProcess,
* player: &mut Player,
* item_production: &ItemProduction,
* clock: &Clock,
* energy: Coin<ENERGY>,

è¿™æ ·æ‰§è¡Œå‘½ä»¤ï¼š

```shell
sui client call --package "{DEFAULT_PACKAGE_ID}" --module skill_process_service --function start_production \
--args "{SKILL_PROCESS_OBJECT_ID_1}" \
"{PLAYER_ID}" \
"{ITEM_PRODUCTION_OBJECT_ID_1}" \
"0x6" \
"{ENERGY_COIN_OBJECT_ID_1}" \
--gas-budget 11000000
```

### å®Œæˆç”Ÿäº§æµç¨‹

å‚æ•°ï¼š

* skill_process: &mut skill_process::SkillProcess,
* player: &mut Player,
* item_production: &ItemProduction,
* experience_table: &ExperienceTable,
* clock: &Clock,

æ‰§è¡Œï¼š

```shell
sui client call --package "{DEFAULT_PACKAGE_ID}" --module skill_process_aggregate --function complete_production \
--args "{SKILL_PROCESS_OBJECT_ID_1}" \
"{PLAYER_ID}" \
"{ITEM_PRODUCTION_OBJECT_ID_1}" \
"{EXPERIENCE_TABLE_OBJECT_ID}" \
"0x6" \
--gas-budget 11000000 --json > testnet_complete_skill_process.json
```

æ¥ä¸‹æ¥ï¼Œå°±å¯ä»¥æ£€æŸ¥æ‰§è¡Œç»“æœã€‚

å…ˆè·å–ç©å®¶æ‹¥æœ‰çš„ Items çš„ table IDï¼š

```shell
sui client object {PLAYER_ID} --json
```

[TBD]

### å…³äº Move Table æˆ–è€… ObjectTable å†…å®¹çš„æŸ¥è¯¢

ä½¿ç”¨ `sui client object {OBJECT_ID}` å‘½ä»¤æŸ¥è¯¢ä¸€ä¸ªå¯¹è±¡ï¼Œå¦‚æœå¯¹è±¡åŒ…å«ç±»å‹ä¸º `Table` æˆ–è€… `ObjectTable` ç±»å‹çš„å­—æ®µï¼Œ
é‚£ä¹ˆè¿™ä¸ªå­—æ®µçš„ä¿¡æ¯è¾“å‡ºç±»ä¼¼ä¸‹é¢è¿™æ ·ï¼š

```text
"items": {
        "type": "0x2::table::Table<{KEY_TYPE}, {VALUE_TYPE}>",
        "fields": {
          "id": {
            "id": "0x600ff5d855b5d9ff63edd9d9215457e1c1f6cbb316dc95999ac0d180c886e197"
          },
          "size": "2"
        }
      },
```

åœ¨ä¸Šé¢çš„ç¤ºä¾‹è¾“å‡ºä¸­ï¼Œâ€œè¡¨â€ï¼ˆtableï¼‰çš„ ID æ˜¯ `0x600ff5d855b5d9ff63edd9d9215457e1c1f6cbb316dc95999ac0d180c886e197`ã€‚
ç„¶åæˆ‘ä»¬å¯ä»¥è¿™æ ·è·å– table çš„â€œåŠ¨æ€å­—æ®µâ€ï¼ˆä½ å¯ä»¥æŠŠåŠ¨æ€å­—æ®µç†è§£ä¸ºè¡¨çš„â€œè¡Œâ€ï¼‰â€”â€”è¿™æ˜¯ä¸ªâ€œåˆ†é¡µâ€æŸ¥è¯¢æ¥å£ï¼š

```shell
curl -X POST \
-H "Content-Type: application/json" \
-d '{"jsonrpc":"2.0","id":1,"method":"suix_getDynamicFields","params":["0x600ff5d855b5d9ff63edd9d9215457e1c1f6cbb316dc95999ac0d180c886e197"]}' \
https://fullnode.testnet.sui.io/
```

å¦‚æœè·å–çš„æ˜¯ `Table` ç±»å‹çš„â€œè¡¨â€ï¼Œé‚£ä¹ˆï¼Œè¿”å›çš„åˆ†é¡µå†…å®¹ç±»ä¼¼ä¸‹é¢è¿™æ ·ï¼š

```text
{"jsonrpc":"2.0","result":{"data":[
{"name":{"type":"u32","value":1},"bcsName":"2UzHM","type":"DynamicField","objectType":"0x14ba8a9763d9883be8dcedce946efc25e5cbc80c4b8f09d1dbc89731fa517fb8::player_item::PlayerItem",
"objectId":"0x8655ebf801c0d9f734bc09b9b6aaff781f4d18c66e8ea4e0cb6261315f7b5bee","version":26421773,"digest":"4dCkgDHtD9cbQAz7P9Lveetm7PfSC8DbABfySHYmgTgy"},
{"name":{"type":"u32","value":2},"bcsName":"3xyZh","type":"DynamicField","objectType":"0x14ba8a9763d9883be8dcedce946efc25e5cbc80c4b8f09d1dbc89731fa517fb8::player_item::PlayerItem",
"objectId":"0x970ccbbd1b5670c4f1e13c8a8eafddf53c0a579b158129e961046ee6c321c739","version":26421895,"digest":"4BnmTVdyAgVT8qN7um8h1CXdWpHqjYPQsyMTmYWKaCjr"}
],"nextCursor":"0x970ccbbd1b5670c4f1e13c8a8eafddf53c0a579b158129e961046ee6c321c739","hasNextPage":false},"id":1}
```

è¿”å›çš„åˆ†é¡µåˆ—è¡¨ä¸­çš„å…ƒç´ ï¼Œ`"type":"DynamicField"`ï¼Œä½ å¯ä»¥è¿™äº›å…ƒç´ ç†è§£ä¸ºâ€œåŠ¨æ€å­—æ®µâ€çš„â€œå¼•ç”¨â€ï¼Œè€Œä¸æ˜¯åŠ¨æ€å­—æ®µçš„å†…å®¹çš„å…¨éƒ¨ã€‚
ç„¶åï¼Œå†åƒä¸‹é¢è¿™æ ·ï¼Œé€šè¿‡åŠ¨æ€å­—æ®µçš„ IDï¼Œè·å–â€œåŠ¨æ€å­—æ®µâ€çš„å†…å®¹ï¼ˆåŠ¨æ€å­—æ®µä¹Ÿæ˜¯ä¸€ä¸ªâ€œå¯¹è±¡â€ï¼‰ï¼š

```shell
sui client object 0x8655ebf801c0d9f734bc09b9b6aaff781f4d18c66e8ea4e0cb6261315f7b5bee

sui client object 0x970ccbbd1b5670c4f1e13c8a8eafddf53c0a579b158129e961046ee6c321c739
```

---

å¦‚æœè·å–çš„æ˜¯ `ObjectTable` ç±»å‹çš„è¡¨ï¼Œ
é‚£ä¹ˆï¼Œ`suix_getDynamicFields` æ–¹æ³•è¿”å›åˆ†é¡µåˆ—è¡¨ä¸­çš„å…ƒç´ ï¼Œ`"type":"DynamicObject"`ã€‚

### Test off-chain service

#### Configuring off-chain service

Open the `application-test.yml` file located in the directory `sui-java-service/suiinfinitesea-service-rest/src/main/resources` and set the publishing transaction digests.

After setting, it should look like this:

```yaml
sui:
  contract:
    jsonrpc:
      url: "https://fullnode.testnet.sui.io/"
    package-publish-transactions:
      common: "{COMMON_PACKAGE_PUBLISH_TRANSACTION_DIGEST}"
      default: "{DEFAULT_PACKAGE_PUBLISH_TRANSACTION_DIGEST}"
```

This is the only place where off-chain service need to be configured, and it's that simple.

#### Creating a database for off-chain service

Use a MySQL client to connect to the local MySQL server and execute the following script to create an empty database (assuming the name is `test5`):

```sql
CREATE SCHEMA `test7` DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_bin;
```

Go to the `sui-java-service` directory and package the Java project:

```shell
mvn package
```

Then, run a command-line tool to initialize the database:

```shell
java -jar ./suiinfinitesea-service-cli/target/suiinfinitesea-service-cli-0.0.1-SNAPSHOT.jar ddl -d "./scripts" -c "jdbc:mysql://127.0.0.1:3306/test7?enabledTLSProtocols=TLSv1.2&characterEncoding=utf8&serverTimezone=GMT%2b0&useLegacyDatetimeCode=false" -u root -p 123456
```

#### Starting off-chain service

In the `sui-java-service` directory, execute the following command to start the off-chain service:

```shell
mvn -pl suiinfinitesea-service-rest -am spring-boot:run
```
