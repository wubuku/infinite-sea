// <autogenerated>
//   This file was generated by dddappp code generator.
//   Any changes made to this file manually will be lost next time the file is regenerated.
// </autogenerated>

package org.dddml.suiinfinitesea.domain.itemproduction;

import java.util.*;
import java.math.*;
import org.dddml.suiinfinitesea.domain.*;
import java.math.BigInteger;
import java.util.Date;
import org.dddml.suiinfinitesea.specialization.*;
import org.dddml.suiinfinitesea.domain.itemproduction.ItemProductionEvent.*;

public abstract class AbstractItemProductionState implements ItemProductionState.SqlItemProductionState {

    private SkillTypeItemIdPair itemProductionId;

    public SkillTypeItemIdPair getItemProductionId() {
        return this.itemProductionId;
    }

    public void setItemProductionId(SkillTypeItemIdPair itemProductionId) {
        this.itemProductionId = itemProductionId;
    }

    private String id_;

    public String getId_() {
        return this.id_;
    }

    public void setId_(String id) {
        this.id_ = id;
    }

    private ProductionMaterials productionMaterials;

    public ProductionMaterials getProductionMaterials() {
        return this.productionMaterials;
    }

    public void setProductionMaterials(ProductionMaterials productionMaterials) {
        this.productionMaterials = productionMaterials;
    }

    private Integer requirementsLevel;

    public Integer getRequirementsLevel() {
        return this.requirementsLevel;
    }

    public void setRequirementsLevel(Integer requirementsLevel) {
        this.requirementsLevel = requirementsLevel;
    }

    private Long baseQuantity;

    public Long getBaseQuantity() {
        return this.baseQuantity;
    }

    public void setBaseQuantity(Long baseQuantity) {
        this.baseQuantity = baseQuantity;
    }

    private Long baseExperience;

    public Long getBaseExperience() {
        return this.baseExperience;
    }

    public void setBaseExperience(Long baseExperience) {
        this.baseExperience = baseExperience;
    }

    private BigInteger baseCreationTime;

    public BigInteger getBaseCreationTime() {
        return this.baseCreationTime;
    }

    public void setBaseCreationTime(BigInteger baseCreationTime) {
        this.baseCreationTime = baseCreationTime;
    }

    private BigInteger energyCost;

    public BigInteger getEnergyCost() {
        return this.energyCost;
    }

    public void setEnergyCost(BigInteger energyCost) {
        this.energyCost = energyCost;
    }

    private Integer successRate;

    public Integer getSuccessRate() {
        return this.successRate;
    }

    public void setSuccessRate(Integer successRate) {
        this.successRate = successRate;
    }

    private BigInteger version;

    public BigInteger getVersion() {
        return this.version;
    }

    public void setVersion(BigInteger version) {
        this.version = version;
    }

    private Long offChainVersion;

    public Long getOffChainVersion() {
        return this.offChainVersion;
    }

    public void setOffChainVersion(Long offChainVersion) {
        this.offChainVersion = offChainVersion;
    }

    private String createdBy;

    public String getCreatedBy() {
        return this.createdBy;
    }

    public void setCreatedBy(String createdBy) {
        this.createdBy = createdBy;
    }

    private Date createdAt;

    public Date getCreatedAt() {
        return this.createdAt;
    }

    public void setCreatedAt(Date createdAt) {
        this.createdAt = createdAt;
    }

    private String updatedBy;

    public String getUpdatedBy() {
        return this.updatedBy;
    }

    public void setUpdatedBy(String updatedBy) {
        this.updatedBy = updatedBy;
    }

    private Date updatedAt;

    public Date getUpdatedAt() {
        return this.updatedAt;
    }

    public void setUpdatedAt(Date updatedAt) {
        this.updatedAt = updatedAt;
    }

    private Boolean active;

    public Boolean getActive() {
        return this.active;
    }

    public void setActive(Boolean active) {
        this.active = active;
    }

    private Boolean deleted;

    public Boolean getDeleted() {
        return this.deleted;
    }

    public void setDeleted(Boolean deleted) {
        this.deleted = deleted;
    }

    public boolean isStateUnsaved() {
        return this.getOffChainVersion() == null;
    }

    private Boolean stateReadOnly;

    public Boolean getStateReadOnly() { return this.stateReadOnly; }

    public void setStateReadOnly(Boolean readOnly) { this.stateReadOnly = readOnly; }

    private boolean forReapplying;

    public boolean getForReapplying() {
        return forReapplying;
    }

    public void setForReapplying(boolean forReapplying) {
        this.forReapplying = forReapplying;
    }

    public AbstractItemProductionState(List<Event> events) {
        initializeForReapplying();
        if (events != null && events.size() > 0) {
            this.setItemProductionId(((ItemProductionEvent.SqlItemProductionEvent) events.get(0)).getItemProductionEventId().getItemProductionId());
            for (Event e : events) {
                mutate(e);
                this.setOffChainVersion((this.getOffChainVersion() == null ? ItemProductionState.VERSION_NULL : this.getOffChainVersion()) + 1);
            }
        }
    }


    public AbstractItemProductionState() {
        initializeProperties();
    }

    protected void initializeForReapplying() {
        this.forReapplying = true;

        initializeProperties();
    }
    
    protected void initializeProperties() {
    }

    @Override
    public int hashCode() {
        return getItemProductionId().hashCode();
    }

    @Override
    public boolean equals(Object obj) {
        if (this == obj) { return true; }
        if (obj instanceof ItemProductionState) {
            return Objects.equals(this.getItemProductionId(), ((ItemProductionState)obj).getItemProductionId());
        }
        return false;
    }


    public void mutate(Event e) {
        setStateReadOnly(false);
        if (false) { 
            ;
        } else if (e instanceof AbstractItemProductionEvent.ItemProductionCreated) {
            when((AbstractItemProductionEvent.ItemProductionCreated)e);
        } else if (e instanceof AbstractItemProductionEvent.ItemProductionUpdated) {
            when((AbstractItemProductionEvent.ItemProductionUpdated)e);
        } else {
            throw new UnsupportedOperationException(String.format("Unsupported event type: %1$s", e.getClass().getName()));
        }
    }

    public void merge(ItemProductionState s) {
        if (s == this) {
            return;
        }
        this.setProductionMaterials(s.getProductionMaterials());
        this.setRequirementsLevel(s.getRequirementsLevel());
        this.setBaseQuantity(s.getBaseQuantity());
        this.setBaseExperience(s.getBaseExperience());
        this.setBaseCreationTime(s.getBaseCreationTime());
        this.setEnergyCost(s.getEnergyCost());
        this.setSuccessRate(s.getSuccessRate());
        this.setVersion(s.getVersion());
        this.setActive(s.getActive());
    }

    public void when(AbstractItemProductionEvent.ItemProductionCreated e) {
        throwOnWrongEvent(e);

        ProductionMaterials productionMaterials = e.getProductionMaterials();
        ProductionMaterials ProductionMaterials = productionMaterials;
        Integer requirementsLevel = e.getRequirementsLevel();
        Integer RequirementsLevel = requirementsLevel;
        Long baseQuantity = e.getBaseQuantity();
        Long BaseQuantity = baseQuantity;
        Long baseExperience = e.getBaseExperience();
        Long BaseExperience = baseExperience;
        BigInteger baseCreationTime = e.getBaseCreationTime();
        BigInteger BaseCreationTime = baseCreationTime;
        BigInteger energyCost = e.getEnergyCost();
        BigInteger EnergyCost = energyCost;
        Integer successRate = e.getSuccessRate();
        Integer SuccessRate = successRate;
        Long suiTimestamp = e.getSuiTimestamp();
        Long SuiTimestamp = suiTimestamp;
        String suiTxDigest = e.getSuiTxDigest();
        String SuiTxDigest = suiTxDigest;
        BigInteger suiEventSeq = e.getSuiEventSeq();
        BigInteger SuiEventSeq = suiEventSeq;
        String suiPackageId = e.getSuiPackageId();
        String SuiPackageId = suiPackageId;
        String suiTransactionModule = e.getSuiTransactionModule();
        String SuiTransactionModule = suiTransactionModule;
        String suiSender = e.getSuiSender();
        String SuiSender = suiSender;
        String suiType = e.getSuiType();
        String SuiType = suiType;
        String status = e.getStatus();
        String Status = status;

        if (this.getCreatedBy() == null){
            this.setCreatedBy(e.getCreatedBy());
        }
        if (this.getCreatedAt() == null){
            this.setCreatedAt(e.getCreatedAt());
        }
        this.setUpdatedBy(e.getCreatedBy());
        this.setUpdatedAt(e.getCreatedAt());

        ItemProductionState updatedItemProductionState = (ItemProductionState) ReflectUtils.invokeStaticMethod(
                    "org.dddml.suiinfinitesea.domain.itemproduction.CreateLogic",
                    "mutate",
                    new Class[]{ItemProductionState.class, ProductionMaterials.class, Integer.class, Long.class, Long.class, BigInteger.class, BigInteger.class, Integer.class, Long.class, String.class, BigInteger.class, String.class, String.class, String.class, String.class, String.class, MutationContext.class},
                    new Object[]{this, productionMaterials, requirementsLevel, baseQuantity, baseExperience, baseCreationTime, energyCost, successRate, suiTimestamp, suiTxDigest, suiEventSeq, suiPackageId, suiTransactionModule, suiSender, suiType, status, MutationContext.forEvent(e, s -> {if (s == this) {return this;} else {throw new UnsupportedOperationException();}})}
            );

//package org.dddml.suiinfinitesea.domain.itemproduction;
//
//public class CreateLogic {
//    public static ItemProductionState mutate(ItemProductionState itemProductionState, ProductionMaterials productionMaterials, Integer requirementsLevel, Long baseQuantity, Long baseExperience, BigInteger baseCreationTime, BigInteger energyCost, Integer successRate, Long suiTimestamp, String suiTxDigest, BigInteger suiEventSeq, String suiPackageId, String suiTransactionModule, String suiSender, String suiType, String status, MutationContext<ItemProductionState, ItemProductionState.MutableItemProductionState> mutationContext) {
//    }
//}

        if (this != updatedItemProductionState) { merge(updatedItemProductionState); } //else do nothing

    }

    public void when(AbstractItemProductionEvent.ItemProductionUpdated e) {
        throwOnWrongEvent(e);

        ProductionMaterials productionMaterials = e.getProductionMaterials();
        ProductionMaterials ProductionMaterials = productionMaterials;
        Integer requirementsLevel = e.getRequirementsLevel();
        Integer RequirementsLevel = requirementsLevel;
        Long baseQuantity = e.getBaseQuantity();
        Long BaseQuantity = baseQuantity;
        Long baseExperience = e.getBaseExperience();
        Long BaseExperience = baseExperience;
        BigInteger baseCreationTime = e.getBaseCreationTime();
        BigInteger BaseCreationTime = baseCreationTime;
        BigInteger energyCost = e.getEnergyCost();
        BigInteger EnergyCost = energyCost;
        Integer successRate = e.getSuccessRate();
        Integer SuccessRate = successRate;
        Long suiTimestamp = e.getSuiTimestamp();
        Long SuiTimestamp = suiTimestamp;
        String suiTxDigest = e.getSuiTxDigest();
        String SuiTxDigest = suiTxDigest;
        BigInteger suiEventSeq = e.getSuiEventSeq();
        BigInteger SuiEventSeq = suiEventSeq;
        String suiPackageId = e.getSuiPackageId();
        String SuiPackageId = suiPackageId;
        String suiTransactionModule = e.getSuiTransactionModule();
        String SuiTransactionModule = suiTransactionModule;
        String suiSender = e.getSuiSender();
        String SuiSender = suiSender;
        String suiType = e.getSuiType();
        String SuiType = suiType;
        String status = e.getStatus();
        String Status = status;

        if (this.getCreatedBy() == null){
            this.setCreatedBy(e.getCreatedBy());
        }
        if (this.getCreatedAt() == null){
            this.setCreatedAt(e.getCreatedAt());
        }
        this.setUpdatedBy(e.getCreatedBy());
        this.setUpdatedAt(e.getCreatedAt());

        ItemProductionState updatedItemProductionState = (ItemProductionState) ReflectUtils.invokeStaticMethod(
                    "org.dddml.suiinfinitesea.domain.itemproduction.UpdateLogic",
                    "mutate",
                    new Class[]{ItemProductionState.class, ProductionMaterials.class, Integer.class, Long.class, Long.class, BigInteger.class, BigInteger.class, Integer.class, Long.class, String.class, BigInteger.class, String.class, String.class, String.class, String.class, String.class, MutationContext.class},
                    new Object[]{this, productionMaterials, requirementsLevel, baseQuantity, baseExperience, baseCreationTime, energyCost, successRate, suiTimestamp, suiTxDigest, suiEventSeq, suiPackageId, suiTransactionModule, suiSender, suiType, status, MutationContext.forEvent(e, s -> {if (s == this) {return this;} else {throw new UnsupportedOperationException();}})}
            );

//package org.dddml.suiinfinitesea.domain.itemproduction;
//
//public class UpdateLogic {
//    public static ItemProductionState mutate(ItemProductionState itemProductionState, ProductionMaterials productionMaterials, Integer requirementsLevel, Long baseQuantity, Long baseExperience, BigInteger baseCreationTime, BigInteger energyCost, Integer successRate, Long suiTimestamp, String suiTxDigest, BigInteger suiEventSeq, String suiPackageId, String suiTransactionModule, String suiSender, String suiType, String status, MutationContext<ItemProductionState, ItemProductionState.MutableItemProductionState> mutationContext) {
//    }
//}

        if (this != updatedItemProductionState) { merge(updatedItemProductionState); } //else do nothing

    }

    public void save() {
    }

    protected void throwOnWrongEvent(ItemProductionEvent event) {
        SkillTypeItemIdPair stateEntityId = this.getItemProductionId(); // Aggregate Id
        SkillTypeItemIdPair eventEntityId = ((ItemProductionEvent.SqlItemProductionEvent)event).getItemProductionEventId().getItemProductionId(); // EntityBase.Aggregate.GetEventIdPropertyIdName();
        if (!stateEntityId.equals(eventEntityId)) {
            throw DomainError.named("mutateWrongEntity", "Entity Id %1$s in state but entity id %2$s in event", stateEntityId, eventEntityId);
        }


        Long stateVersion = this.getOffChainVersion();

    }


    public static class SimpleItemProductionState extends AbstractItemProductionState {

        public SimpleItemProductionState() {
        }

        public SimpleItemProductionState(List<Event> events) {
            super(events);
        }

        public static SimpleItemProductionState newForReapplying() {
            SimpleItemProductionState s = new SimpleItemProductionState();
            s.initializeForReapplying();
            return s;
        }

    }



}

